<html>
  <head>
    <title>Taxi problem in Reinforcement Learning</title>
    <!-- include the js file -->
    <script type="text/javascript" src="jquery-1.11.3.js"></script>
    <script type="text/javascript" src="qlearning.js"></script>
    <script type="text/javascript" src="util.js"></script>
    <script type="text/javascript" src="taxi.js"></script>
    <script type="text/javascript" src="taxi_view.js"></script>
    

    <!-- include the css file -->
    <link rel="stylesheet" type="text/css" href="taxi.css">
    <meta name="description" content="Taxi problem in Reinforcement learning" />
  </head>
  <!-- start draw when load the body -->
<!--  <body onload="VIEW.drawBackground()">-->
	<body>
    <div id="title">The Taxi Problem</div>
    <div id="description">
    Taxi Problem is a classical problem in Reinforcement Learning.
    In this problem, the agent (taxi) needs to pick up the passenger from one of the four colored place and deliver him/her to the destination (also one of the four colored place).
    The game is in 5 by 5 grid world.
    There are six actions that are available to the agent in this game: LEFT, RIGHT, UP, DOWN, PICKUP and PUTDOWN.
    The first four action will make the agent move 1 step forward according to the direction of the action, but won't have effect when the agent hits the wall or boundaries. 
    At each step, the agent will receive a reward of -1. However, when the delivery is achieved, it will receive a reward of 20. 
    In some conditions, several actions are illegal. This includes but not limited to take PUTDOWN action when there is no passenger in the taxi or it is not the destination spot, PICKUP a passenger where there is no passenger and so on. 
    All these illegal action will cause a reward of -10 and change nothing.
    Thus, without any state abstraction, there are totally 500 states, including 25 position of the taxi, 4 possible location of the destination, and 5 possible location of the passenger (four colors and taxi).
    </div>
    <div id="main">
    	<div id="canvas">
      		<canvas width="500" height="500" id="taxi"></canvas>
    	</div>
    	<div id="info">iteration:0</div>
    	<div id="control">
      		<button id="start">Start Learning</button>
      		<button id="stop">Stop</button>
      		<button id="next">Next Step</button>
      		<button id="reset">Reset</button>
    	</div>
    	<div class="clearfix"></div>
    </div>
    
    <script>
    	var inLearning = false;
    	var interval = 20;
    	
    	function stopLearning() {
    		clearInterval(inLearning);
    		inLearning = false;
    	}
    
    	$(document).ready(function(event){
    		Taxi.view.initializeView();
    		Taxi.view.initGame();
    	});
    	
    	$("#next").on("click",function(event){
    		if(typeof inLearning === 'number') {
    			stopLearning();
    		}
    		Taxi.view.nextStep();
    	});
    	
    	$("#start").on("click",function(event){
    		inLearning = setInterval(Taxi.view.nextStep,interval);
    	});
    	
    	$("#stop").on("click",function(event){
    		stopLearning();
    	});
    	
    	$("#reset").on("click",function(event){
    		console.log("reset");
    		
    		if(typeof inLearning === 'number') {
    			stopLearning();
    		}
    		
    		Taxi.view.initGame();
    	});
    </script>
    <div id="paperlist">
    </div>
    <div id="footer">
      Developed by Ermo Wei
    </div>
  </body>
</html>
